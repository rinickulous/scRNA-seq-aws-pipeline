/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Demo config for quick pipeline testing
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Minimal configuration for fast pipeline demonstration

    Use as follows:
        nextflow run workflows/main.nf -profile demo

----------------------------------------------------------------------------------------
*/

params {
    config_profile_name        = 'Demo profile'
    config_profile_description = 'Quick demo configuration with minimal resources'

    // Very limited resources for fast demo
    max_cpus   = 2
    max_memory = '4.GB'
    max_time   = '30.min'

    // Demo data
    input = 'data/demo/samplesheet.csv'
    outdir = './results_demo'
    
    // Reference genome - using minimal for speed
    genome = 'GRCh38'
    
    // Reduced parameters for very quick testing
    expected_cells = 500
    min_cells = 1
    min_features = 10
    max_features = 1000
    max_mt_percent = 50
    
    // Skip intensive processes for demo
    skip_cellranger = false  // Set to true if no Cell Ranger available
    skip_seurat = false
    
    // Default values to avoid warnings
    validate_params = false
    help = false
    version = false
}

// Process-specific configurations for demo
process {
    // Very short time limits for demo
    withLabel:process_single {
        cpus   = 1
        memory = '2.GB'
        time   = '10.min'
    }
    withLabel:process_low {
        cpus   = 1
        memory = '2.GB' 
        time   = '10.min'
    }
    withLabel:process_medium {
        cpus   = 2
        memory = '4.GB'
        time   = '20.min'
    }
    withLabel:process_high {
        cpus   = 2
        memory = '4.GB'
        time   = '30.min'
    }
    
    // Error handling for demo - fail fast
    errorStrategy = 'terminate'
    maxRetries    = 0
}